---
import type { Banner } from '@/types';
import { getCollection } from 'astro:content';

const allBanners = (await getCollection('banner')) as Banner[];

const firstBanner = allBanners
  .filter((banner) => banner.data.active)
  .sort((a, b) => a.data.order - b.data.order)[0];

const isHome = Astro.url.pathname === '/' || Astro.url.pathname === '';
---

<>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  {
    isHome && firstBanner && (
      <link
        rel="preload"
        fetchpriority="high"
        as="image"
        href={firstBanner.data.image.src}
        crossorigin="anonymous"
      />
    )
  }
  <link
    rel="preload"
    href="https://cdn.jsdelivr.net/npm/swiper@12.0.3/swiper-bundle.min.css"
    as="style"
    onload="this.rel='stylesheet'"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="preload"
    as="style"
    onload="this.rel='stylesheet'"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
    rel="preload"
    as="style"
    onload="this.rel='stylesheet'"
  />
  <link
    href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.1.0/dist/cookieconsent.css"
    rel="preload"
    as="style"
    onload="this.rel='stylesheet'"
  />

  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
  </noscript>
  <noscript>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@12.0.3/swiper-bundle.min.css"
    />
  </noscript>
</>
